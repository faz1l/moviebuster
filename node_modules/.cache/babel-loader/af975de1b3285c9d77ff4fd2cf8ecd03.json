{"ast":null,"code":"import _slicedToArray from\"/Users/naumnaumov/Projects/moviebuster/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/naumnaumov/Projects/moviebuster/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useReducer,useEffect}from\"react\";import\"../App.css\";import Header from\"./Header\";import Movie from\"./Movie\";import Search from\"./Search\";var MOVIE_API_URL=\"https://www.omdbapi.com/?s=man&apikey=4a3b711b\";var initialState={loading:true,movies:[],errorMessage:null};var reducer=function reducer(state,action){switch(action.type){case\"SEARCH_MOVIES_REQUEST\":return _objectSpread({},state,{loading:true,errorMessage:null});case\"SEARCH_MOVIES_SUCCESS\":return _objectSpread({},state,{loading:false,movies:action.payload});case\"SEARCH_MOVIES_FAILURE\":return _objectSpread({},state,{loading:false,errorMessage:action.error});default:return state;}};var App=function App(){var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){fetch(MOVIE_API_URL).then(function(response){return response.json();}).then(function(jsonResponse){dispatch({type:\"SEARCH_MOVIES_SUCCESS\",payload:jsonResponse.Search});});},[]);var search=function search(searchValue){dispatch({type:\"SEARCH_MOVIES_REQUEST\"});fetch(\"https://www.omdbapi.com/?s=\".concat(searchValue,\"&apikey=4a3b711b\")).then(function(response){return response.json();}).then(function(jsonResponse){if(jsonResponse.Response===\"True\"){dispatch({type:\"SEARCH_MOVIES_SUCCESS\",payload:jsonResponse.Search});}else{dispatch({type:\"SEARCH_MOVIES_FAILURE\",error:jsonResponse.Error});}});};var movies=state.movies,errorMessage=state.errorMessage,loading=state.loading;return React.createElement(\"div\",{className:\"App\"},React.createElement(Header,{text:\"MovieBuster\"}),React.createElement(Search,{search:search}),React.createElement(\"p\",{className:\"App-intro\"},\"Sharing a few of our favourite movies\"),React.createElement(\"div\",{className:\"movies\"},loading&&!errorMessage?React.createElement(\"span\",null,\"loading... \"):errorMessage?React.createElement(\"div\",{className:\"errorMessage\"},errorMessage):movies.map(function(movie,index){return React.createElement(Movie,{key:\"\".concat(index,\"-\").concat(movie.Title),movie:movie});})));};export default App;","map":{"version":3,"sources":["/Users/naumnaumov/Projects/moviebuster/src/components/App.js"],"names":["React","useReducer","useEffect","Header","Movie","Search","MOVIE_API_URL","initialState","loading","movies","errorMessage","reducer","state","action","type","payload","error","App","dispatch","fetch","then","response","json","jsonResponse","search","searchValue","Response","Error","map","movie","index","Title"],"mappings":"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","sourcesContent":["import React, { useReducer, useEffect } from \"react\";\nimport \"../App.css\";\nimport Header from \"./Header\";\nimport Movie from \"./Movie\";\nimport Search from \"./Search\";\n\nconst MOVIE_API_URL = \"https://www.omdbapi.com/?s=man&apikey=4a3b711b\";\n\nconst initialState = {\n  loading: true,\n  movies: [],\n  errorMessage: null\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"SEARCH_MOVIES_REQUEST\":\n      return {\n        ...state,\n        loading: true,\n        errorMessage: null\n      };\n    case \"SEARCH_MOVIES_SUCCESS\":\n      return {\n        ...state,\n        loading: false,\n        movies: action.payload\n      };\n    case \"SEARCH_MOVIES_FAILURE\":\n      return {\n        ...state,\n        loading: false,\n        errorMessage: action.error\n      };\n    default:\n      return state;\n  }\n};\n\nconst App = () => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n    useEffect(() => {\n    \n        fetch(MOVIE_API_URL)\n            .then(response => response.json())\n            .then(jsonResponse => {\n        \n            dispatch({\n                type: \"SEARCH_MOVIES_SUCCESS\",\n                payload: jsonResponse.Search\n        \t});\n      \t});\n  \t}, []);\n\n    const search = searchValue => {\n    \tdispatch({\n      \ttype: \"SEARCH_MOVIES_REQUEST\"\n    \t});\n\t\n        fetch(`https://www.omdbapi.com/?s=${ searchValue }&apikey=4a3b711b`)\n      \t.then(response => response.json())\n      \t.then(jsonResponse => {\n        \tif (jsonResponse.Response === \"True\") {\n          \tdispatch({\n                type: \"SEARCH_MOVIES_SUCCESS\",\n                payload: jsonResponse.Search\n          \t});\n        \t} else {\n          \tdispatch({\n                type: \"SEARCH_MOVIES_FAILURE\",\n                error: jsonResponse.Error\n          \t});\n          }\n      \t});\n\t  };\n\n    const { movies, errorMessage, loading } = state;\n\n    return (\n    <div className=\"App\">\n      <Header text=\"MovieBuster\" />\n      <Search search={ search } />\n      <p className=\"App-intro\">Sharing a few of our favourite movies</p>\n      <div className=\"movies\">\n        {loading && !errorMessage ? (\n          <span>loading... </span>\n        ) : errorMessage ? (\n          <div className=\"errorMessage\">{ errorMessage }</div>\n        ) : (\n          movies.map((movie, index) => (\n            <Movie key={ `${ index }-${ movie.Title }`} movie={ movie } />\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}